- hosts: all
  pre_tasks:
    # env COMPRESSION=NONE HBASE_HOME=/usr/local/hbase /usr/local/share/opentsdb/tools/create_table.sh
    # XXX java.net.InetAddress.getLocalHost throws an exception without this
    - shell: echo "127.0.0.1 localhost {{ ansible_hostname }}" > /etc/hosts
      changed_when: False
  roles:
    - ansible-role-hadoop-datanode
  vars:
    hadoop_config:
      core_site:
        - [ name: fs.default.name, value: 'hdfs://localhost/' ]
      hdfs_site:
        - [ name: dfs.nameservices, value: mycluster ]
        - [ name: dfs.replication,value: 1 ]
        - 
          - name: dfs.datanode.data.dir
          - value: "file://{{ hadoop_datanode_dfs_datanode_data_dir }}"
      mapred_site:
        - [ name: mapred.job.tracker, value: "localhost:9001" ]
